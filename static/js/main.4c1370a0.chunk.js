(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{134:function(e,t,a){},138:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(30),r=a.n(s),i=(a(109),a(7)),l=a.n(i),o=a(11),j=a(4),u=a(8),d=a(40),b=a(95),O=a.n(b),h=(a(93),O.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/tractian-fullstack-challenge",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL}));h.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}));var x=h,p=a(153),m=a(163),f=a(160),v=a(154),g=a(98),w=(a(134),a(1));var y=function(){var e=Object(u.g)(),t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(""),i=Object(j.a)(r,2),d=i[0],b=i[1];function O(){return(O=Object(o.a)(l.a.mark((function t(a){var n,s,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,x.post("/login",{loginID:c});case 4:n=t.sent,s=n.data,r=s.token,i=s.company,localStorage.setItem("company",JSON.stringify(i)),localStorage.setItem("token",r),e("/"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),b("Login failed");case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){Object(o.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("/me");case 2:a=t.sent,200===a.status&&e("/");case 5:case"end":return t.stop()}}),t)})))()}),[e]),Object(w.jsx)(p.a,{className:"container-login",children:Object(w.jsx)(m.a,{className:"login-form",children:Object(w.jsxs)(m.a.Body,{children:[Object(w.jsxs)(m.a.Title,{className:"fs-4 text-center",children:["Wellcome to ",Object(w.jsx)("br",{}),"Assets Manager"]}),Object(w.jsxs)(f.a,{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(w.jsx)(f.a.Group,{className:"mb-3",children:Object(w.jsx)(f.a.Control,{type:"text",placeholder:"Login ID",onChange:function(e){return s(e.target.value)}})}),d&&Object(w.jsx)(v.a,{variant:"danger",className:"error",children:d}),Object(w.jsx)(g.a,{variant:"primary",type:"submit",className:"login-form-btn",children:"Enter"})]})]})})})},N=a(56),S=a.n(N),k=a(84),C=a.n(k),T=a(99),_=a.n(T),D=a(156),E=a(164),L=a(157),A=a(96),M={chart:{type:"pie",options3d:{enabled:!0,alpha:45}},plotOptions:{pie:{innerSize:100,depth:45}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{enabled:!1}}}]},title:{text:"Assets Status"},series:[{data:[1,2,3]}]},I={chart:{type:"pie",options3d:{enabled:!0,alpha:45}},plotOptions:{pie:{innerSize:100,depth:45}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{enabled:!1}}}]},title:{text:"Health Level"},series:[{data:[1,2,3]}]},P=a(161),U=a(101),H=a(159);a(138);var F=function(e){var t=e.states,a=Object(u.g)();function n(){return(n=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/logout").finally((function(){localStorage.clear(),a("/login")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsx)(P.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(w.jsxs)(p.a,{className:"nav-bar",fluid:!0,children:[Object(w.jsx)(d.b,{to:"/",className:"brand-link",children:Object(w.jsx)(P.a.Brand,{children:"Assets Manager"})}),Object(w.jsx)(P.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(w.jsxs)(P.a.Collapse,{id:"basic-navbar-nav",children:[Object(w.jsx)(U.a,{children:Object(w.jsx)(P.a.Text,{className:"me-3 company-name",children:"".concat(t.companyName)})}),Object(w.jsxs)(U.a,{className:"navbar-unit",children:[Object(w.jsx)(P.a.Text,{className:"me-1 ",children:"Unit(s):"}),Object(w.jsxs)(H.a,{className:"p-0",title:t.unitView.name||"All",id:"collasible-nav-dropdown",onSelect:function(e){return"all"===e?t.setUnitView("all"):t.setUnitView(t.units[e])},children:[Object(w.jsx)(H.a.Item,{eventKey:"all",children:"ALL"}),t.units.map((function(e,t){return Object(w.jsx)(H.a.Item,{className:"unit-name",eventKey:t,children:e.name},t)}))]})]}),Object(w.jsx)(U.a,{className:"ms-auto",children:Object(w.jsx)(U.a.Link,{onClick:function(){return n.apply(this,arguments)},children:"Exit"})})]})]})})},K=a(155);a(141);var q=function(e){var t=e.states,a=t.data,n=t.index,c=t.handleDelete,s=t.handleModify;return Object(w.jsx)(p.a,{children:Object(w.jsxs)(m.a,{className:"asset-card",children:[Object(w.jsx)(m.a.Img,{className:"card-img",variant:"top",src:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/tractian-fullstack-challenge",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_IMG_URL,"/").concat(a.image)}),Object(w.jsxs)(m.a.Body,{children:[Object(w.jsxs)(m.a.Title,{className:"fs-4 text-center card-title",children:[a.name,Object(w.jsx)(K.a,{pill:!0,bg:function(e){switch(e){case"running":return"success";case"alerting":return"warning";case"stopped":return"danger"}}(a.status),text:"dark",className:"asset-card-subtitle",children:a.status.toUpperCase()})]}),Object(w.jsxs)(m.a.Text,{children:[Object(w.jsx)("span",{className:"fw-bold",children:"Model:"})," ".concat(a.model)]}),Object(w.jsxs)(m.a.Text,{children:[Object(w.jsx)("span",{className:"fw-bold",children:"Owner:"})," ".concat(a.owner)]}),Object(w.jsxs)(m.a.Text,{children:[Object(w.jsx)("span",{className:"fw-bold",children:"Description:"})," ".concat(a.description)]}),Object(w.jsxs)(m.a.Text,{children:[Object(w.jsx)("span",{className:"fw-bold",children:"Health level:"}),Object(w.jsx)("input",{type:"range",className:"fw-bold slider",value:a.healthLevel,readOnly:!0})]}),Object(w.jsxs)("div",{className:"d-flex justify-content-evenly",children:[Object(w.jsx)(g.a,{variant:"primary",onClick:function(){return s(n)},children:"Modify"}),Object(w.jsx)(g.a,{variant:"danger",onClick:function(){return c(n)},children:"Delete"})]})]})]})})},R=a(162);a(142);var B=function(e){var t=e.states,a=t.showModal,c=t.setShowModal,s=t.assetData,r=t.setAssetData,i=t.setAssets,u=t.unitView,d=Object(n.useState)(""),b=Object(j.a)(d,2),O=b[0],h=b[1],p=Object(n.useState)(""),m=Object(j.a)(p,2),y=m[0],N=m[1],S=Object(n.useState)(""),k=Object(j.a)(S,2),C=k[0],T=k[1],_=Object(n.useState)(""),D=Object(j.a)(_,2),E=D[0],L=D[1],A=Object(n.useState)(""),M=Object(j.a)(A,2),I=M[0],P=M[1],U=Object(n.useState)(""),H=Object(j.a)(U,2),F=H[0],K=H[1],q=Object(n.useState)(0),B=Object(j.a)(q,2),G=B[0],V=B[1],W=Object(n.useState)({}),z=Object(j.a)(W,2),J=z[0],Q=z[1];function X(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(""),r({}),Q({}),c(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(o.a)(l.a.mark((function e(t){var a,n,o,j,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in t.preventDefault(),a=new FormData,n={name:y,owner:C,model:E,status:I,description:F,healthLevel:G})n[o]!==s[o]&&a.append(o,n[o]);if(J.name&&a.append("image",J),e.prev=5,!s._id){e.next=11;break}return e.next=9,x.put("/assets/".concat(s._id),a);case 9:e.next=13;break;case 11:return e.next=13,x.post("/units/".concat(u._id),a);case 13:return e.next=15,x.get("/units/".concat(u._id,"/assets"));case 15:j=e.sent,d=j.data,i(d),h(""),r({}),Q({}),c(!1),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(5),h("Unable to save changes to the asset");case 27:case"end":return e.stop()}}),e,null,[[5,24]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){N(s.name||""),T(s.owner||""),L(s.model||""),P(s.status||""),K(s.description||""),V(s.healthLevel||0)}),[s]),Object(w.jsxs)(R.a,{show:a,onHide:X,children:[Object(w.jsx)(R.a.Header,{closeButton:!0,children:Object(w.jsx)(R.a.Title,{children:s?"Modify asset":"New asset"})}),Object(w.jsxs)(R.a.Body,{children:[Object(w.jsxs)(f.a,{onSubmit:function(e){return Z.apply(this,arguments)},id:"asset",children:[Object(w.jsxs)(f.a.Group,{className:"d-flex justify-content-evenly align-items-center mb-2",children:[Object(w.jsx)(f.a.Label,{className:"w-25 fw-bold",children:"Name"}),Object(w.jsx)(f.a.Control,{required:!s,className:"w-50",type:"text",value:y,onChange:function(e){return N(e.target.value)}})]}),Object(w.jsxs)(f.a.Group,{className:"d-flex justify-content-evenly align-items-center mb-2",children:[Object(w.jsx)(f.a.Label,{className:"w-25 fw-bold",children:"Owner"}),Object(w.jsx)(f.a.Control,{required:!s,className:"w-50",type:"text",value:C,onChange:function(e){return T(e.target.value)}})]}),Object(w.jsxs)(f.a.Group,{className:"d-flex justify-content-evenly align-items-center mb-2",children:[Object(w.jsx)(f.a.Label,{className:"w-25 fw-bold",children:"Model"}),Object(w.jsx)(f.a.Control,{required:!s,className:"w-50",type:"text",value:E,onChange:function(e){return L(e.target.value)}})]}),Object(w.jsxs)(f.a.Group,{className:"d-flex justify-content-evenly align-items-center mb-2",children:[Object(w.jsx)(f.a.Label,{className:"w-25 fw-bold",children:"Status"}),Object(w.jsx)(f.a.Select,{required:!s,className:"w-50",type:"text",value:I,onChange:function(e){return P(e.target.value)},children:["","running","alerting","stopped"].map((function(e,t){return Object(w.jsx)("option",{value:e,children:e},t)}))})]}),Object(w.jsxs)(f.a.Group,{className:"d-flex justify-content-evenly align-items-center mb-2",children:[Object(w.jsx)(f.a.Label,{className:"w-25 fw-bold",children:"Description"}),Object(w.jsx)(f.a.Control,{required:!s,className:"w-50",as:"textarea",value:F,onChange:function(e){return K(e.target.value)}})]}),Object(w.jsxs)(f.a.Group,{className:"d-flex justify-content-evenly align-items-center mb-2",children:[Object(w.jsx)(f.a.Label,{className:"w-25 fw-bold",children:"Health level"}),Object(w.jsxs)("div",{className:"w-50 hl-container",children:[Object(w.jsx)(f.a.Control,{required:!s,type:"number",min:"0",max:"100",className:"hl-number-input",value:G,onChange:function(e){return V(e.target.value)}}),Object(w.jsx)("input",{type:"range",className:"fw-bold slider slider-editable",min:"0",max:"100",value:G,onChange:function(e){return V(e.target.value)}})]})]}),Object(w.jsxs)(f.a.Group,{className:"d-flex justify-content-evenly align-items-center mb-2",children:[Object(w.jsx)(f.a.Label,{className:"w-25 fw-bold",children:"Image"}),Object(w.jsx)(f.a.Control,{required:!s,className:"w-50",type:"file",onChange:function(e){return Q(e.target.files[0])}})]})]}),O&&Object(w.jsx)(v.a,{variant:"danger",className:"error",children:O})]}),Object(w.jsxs)(R.a.Footer,{children:[Object(w.jsx)(g.a,{variant:"secondary",onClick:X,children:"Close"}),Object(w.jsx)(g.a,{variant:"primary",type:"submit",form:"asset",children:s?"Save Changes":"Create asset"})]})]})};a(143),a(144);var G=function(){_()(S.a);var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)("all"),r=Object(j.a)(s,2),i=r[0],u=r[1],d=Object(n.useState)([]),b=Object(j.a)(d,2),O=b[0],h=b[1],m=Object(n.useState)(!1),f=Object(j.a)(m,2),y=f[0],N=f[1],k=Object(n.useState)({}),T=Object(j.a)(k,2),P=T[0],U=T[1],H=JSON.parse(localStorage.getItem("company"));function K(e){return R.apply(this,arguments)}function R(){return(R=Object(o.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Voc\xea tem certeza sobre deletar essa despesa? A a\xe7\xe3o n\xe3o poder\xe1 ser desfeita")){e.next=9;break}return e.next=4,x.delete("/assets/".concat(O[t]._id));case 4:return e.next=6,x.get("/units/".concat(i._id,"/assets"));case 6:a=e.sent,n=a.data,h(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return V.apply(this,arguments)}function V(){return(V=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(!0),U(O[t]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H._id){e.next=6;break}return e.next=3,x.get("/companies/".concat(H._id));case 3:t=e.sent,a=t.data.units,c(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[H._id]),Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t,a,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("all"!==i||!H._id){e.next=8;break}return e.next=3,x.get("/".concat(H._id,"/all-assets"));case 3:t=e.sent,a=t.data,h(a),e.next=14;break;case 8:if(!i._id){e.next=14;break}return e.next=11,x.get("/units/".concat(i._id,"/assets"));case 11:n=e.sent,c=n.data,h(c);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i,H._id]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(F,{states:{companyName:H.name,companyID:H._id,unitView:i,setUnitView:u,units:a}}),Object(w.jsx)("h1",{className:"display-1 text-center",children:"all"===i?"ALL":i.name.toUpperCase()}),Object(w.jsx)(p.a,{children:Object(w.jsxs)(D.a,{defaultActiveKey:"sumary",children:[Object(w.jsxs)(E.a,{eventKey:"sumary",title:"Sumary",children:[Object(w.jsx)(v.a,{variant:"danger",className:"error",children:"Feature under development: This charts don't represent actual data!"}),Object(w.jsx)(p.a,{children:Object(w.jsxs)(L.a,{className:"justify-content-md-center",children:[Object(w.jsx)(A.a,{md:"auto",children:Object(w.jsx)(C.a,{highcharts:S.a,options:I})}),Object(w.jsx)(A.a,{md:"auto",children:Object(w.jsx)(C.a,{highcharts:S.a,options:M})})]})})]}),Object(w.jsxs)(E.a,{eventKey:"assets",title:"Assets",children:["all"!==i&&Object(w.jsx)(g.a,{className:"add-new-asset-btn",onClick:function(){N(!0),U(!1)},children:"Add new asset"}),Object(w.jsx)(p.a,{className:"cards-container",children:O.length>0?O.map((function(e,t){return Object(w.jsx)(q,{states:{data:e,index:t,handleDelete:K,handleModify:G}},"card-".concat(t))})):"Network failure or there are no assets available for this unit"})]})]})}),Object(w.jsx)(B,{states:{showModal:y,setShowModal:N,assetData:P,setAssetData:U,setAssets:h,unitView:i}})]})},V=a(158);var W=function(e){var t=e.states,a=t.askEditModal,n=t.clearStates,c=t.actionTarget,s=t.askPassword,r=t.setEditionModal,i=t.refreshData;function j(e,t){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.delete("/".concat(t,"/").concat(a));case 2:i(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(R.a,{show:a,children:[Object(w.jsx)(R.a.Header,{children:Object(w.jsx)(R.a.Title,{children:"ACTION"})}),Object(w.jsxs)(R.a.Footer,{children:[Object(w.jsx)(g.a,{variant:"secondary",onClick:n,children:"Cancel"}),Object(w.jsx)(g.a,{variant:"danger",onClick:function(){return s(j,c)},children:"Delete"}),Object(w.jsx)(g.a,{variant:"primary",onClick:function(){return r(!0)},children:"Edit"})]})]})},z=a(25);var J=function(e){var t=e.states,a=t.newDataModal,c=t.actionTarget,s=t.clearStates,r=t.askPassword,i=t.refreshData,u=Object(n.useState)(""),d=Object(j.a)(u,2),b=d[0],O=d[1],h=Object(n.useState)(""),p=Object(j.a)(h,2),m=p[0],y=p[1],N=Object(n.useState)(""),S=Object(j.a)(N,2),k=S[0],C=S[1],T=Object(n.useState)(""),_=Object(j.a)(T,2),D=_[0],E=_[1];function L(e,t){return A.apply(this,arguments)}function A(){return(A=Object(o.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.post("/".concat(t),a);case 2:e.t0=t,e.next="new-user"===e.t0?5:"new-company"===e.t0?7:"new-unit"===e.t0?9:11;break;case 5:return t="users",e.abrupt("break",12);case 7:return t="companies",e.abrupt("break",12);case 9:return t="units",e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:i(t);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){"new-user"!==c[0]&&"new-unit"!==c[0]||Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/companies");case 2:t=e.sent,a=t.data,console.log(a),E(a);case 6:case"end":return e.stop()}}),e)})))()}),[c]),Object(w.jsxs)(R.a,{show:a,children:[Object(w.jsx)(R.a.Header,{children:Object(w.jsx)(R.a.Title,{children:"".concat(c.length>0&&c[0].toUpperCase())})}),Object(w.jsxs)(R.a.Body,{children:[Object(w.jsxs)(f.a,{onSubmit:function(e){e.preventDefault();try{r(L,[].concat(Object(z.a)(c),[{name:m,company:k}])),y(""),C(""),E("")}catch(t){O("Not able to create item")}},id:"new-data",children:[Object(w.jsxs)(f.a.Group,{className:"d-flex justify-content-evenly align-items-center mb-2",children:[Object(w.jsx)(f.a.Label,{className:"w-25 fw-bold",children:"Name"}),Object(w.jsx)(f.a.Control,{required:!0,type:"text",value:m,className:"w-50",onChange:function(e){return y(e.target.value)}})]}),D&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(f.a.Group,{className:"d-flex justify-content-evenly align-items-center mb-2",children:[Object(w.jsx)(f.a.Label,{className:"w-25 fw-bold",children:"Company"}),Object(w.jsxs)(f.a.Select,{required:!0,className:"w-50",type:"text",value:k,onChange:function(e){return C(e.target.value)},children:[Object(w.jsx)("option",{}),D.map((function(e,t){return Object(w.jsx)("option",{value:e.name,children:e.name},t)}))]})]})})]}),b&&Object(w.jsx)(v.a,{variant:"danger",className:"error",children:b})]}),Object(w.jsxs)(R.a.Footer,{children:[Object(w.jsx)(g.a,{variant:"secondary",onClick:function(){s(),y(""),C(""),E("")},children:"Cancel"}),Object(w.jsx)(g.a,{variant:"primary",type:"submit",form:"new-data",children:"Save channges"})]})]})};var Q=function(e){var t=e.states,a=t.editionModal,c=t.actionTarget,s=t.clearStates,r=t.askPassword,i=t.refreshData,u=Object(n.useState)(""),d=Object(j.a)(u,2),b=d[0],O=d[1];function h(e,t,a){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(l.a.mark((function e(t,a,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.put("/".concat(t,"/").concat(a),n);case 2:i(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(R.a,{show:a,children:[Object(w.jsx)(R.a.Header,{children:Object(w.jsx)(R.a.Title,{children:"EDIT ".concat(c.length>0&&c[0].toUpperCase())})}),Object(w.jsxs)(R.a.Body,{children:[Object(w.jsx)(f.a.Label,{className:"fw-bold",children:"Name"}),Object(w.jsx)(f.a.Control,{required:!0,type:"text",id:"master-password",value:b,onChange:function(e){return O(e.target.value)}}),Object(w.jsx)(v.a,{variant:"danger",className:"error",children:'Due to major implications, only "name" can be updated'})]}),Object(w.jsxs)(R.a.Footer,{children:[Object(w.jsx)(g.a,{variant:"secondary",onClick:s,children:"Cancel"}),Object(w.jsx)(g.a,{variant:"primary",onClick:function(){return r(h,[].concat(Object(z.a)(c),[{name:b}]))},children:"Save channges"})]})]})};var X=function(e){var t=e.states,a=Object(u.g)(),c=Object(n.useState)(""),s=Object(j.a)(c,2),r=s[0],i=s[1],d=Object(n.useState)(""),b=Object(j.a)(d,2),O=b[0],h=b[1];function p(){return(p=Object(o.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.post("/master",{password:O});case 3:(a=t.action).fn.apply(a,Object(z.a)(t.action.params)),h(""),i(""),t.clearStates(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i("Unable to authenticate");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(w.jsxs)(R.a,{show:t.pwModal,children:[Object(w.jsxs)(R.a.Body,{children:[Object(w.jsx)(f.a.Label,{className:"fw-bold",children:"Master Password"}),Object(w.jsx)(f.a.Control,{required:!0,type:"password",id:"master-password",value:O,onChange:function(e){return h(e.target.value)}}),Object(w.jsxs)("label",{children:[Object(w.jsx)("input",{type:"checkbox",value:O,onClick:function(){var e=document.getElementById("master-password");"password"===e.type?e.type="text":e.type="password"}})," Show Password"]}),Object(w.jsx)(v.a,{variant:"primary",className:"error",children:"Test PW: tractian-challange"}),r&&Object(w.jsx)(v.a,{variant:"danger",className:"error",children:r})]}),Object(w.jsxs)(R.a.Footer,{children:[Object(w.jsx)(g.a,{variant:"danger",onClick:function(){t.clearStates(),a("/")},children:"Close"}),Object(w.jsx)(g.a,{variant:"primary",onClick:function(){return function(){return p.apply(this,arguments)}()},children:"OK"})]})]})};a(145);var Y=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),r=Object(j.a)(s,2),i=r[0],u=r[1],d=Object(n.useState)(!1),b=Object(j.a)(d,2),O=b[0],h=b[1],m=Object(n.useState)(!1),f=Object(j.a)(m,2),v=f[0],y=f[1],N=Object(n.useState)(!1),S=Object(j.a)(N,2),k=S[0],C=S[1],T=Object(n.useState)("users"),_=Object(j.a)(T,2),L=_[0],A=_[1],M=Object(n.useState)({}),I=Object(j.a)(M,2),U=I[0],H=I[1],F=Object(n.useState)([]),K=Object(j.a)(F,2),q=K[0],R=K[1],B=Object(n.useState)([]),G=Object(j.a)(B,2),z=G[0],Y=G[1],Z=Object(n.useState)([]),$=Object(j.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)([]),ne=Object(j.a)(ae,2),ce=ne[0],se=ne[1];function re(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(o.a)(l.a.mark((function e(t){var a,n,c,s,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="users"===e.t0?3:"companies"===e.t0?9:"units"===e.t0?15:21;break;case 3:return e.next=5,x.get("/users");case 5:return a=e.sent,n=a.data,Y(n),e.abrupt("break",22);case 9:return e.next=11,x.get("/companies");case 11:return c=e.sent,s=c.data,te(s),e.abrupt("break",22);case 15:return e.next=17,x.get("/units");case 17:return r=e.sent,i=r.data,se(i),e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t){c(!0),H({fn:e,params:t})}function oe(){H({}),R([]),u(!1),c(!1),h(!1),y(!1)}return Object(n.useEffect)((function(){Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(C,[!0]),e.next=3,x.get("/users");case 3:t=e.sent,a=t.data,Y(a);case 6:case"end":return e.stop()}}),e)})))()}),[]),Object(n.useEffect)((function(){re(L)}),[L]),Object(w.jsxs)(w.Fragment,{children:[k?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(w.jsx)(p.a,{className:"nav-bar",fluid:!0,children:Object(w.jsx)(P.a.Brand,{children:"Assets Manager"})})}),Object(w.jsxs)(p.a,{className:"mt-5",children:[Object(w.jsx)("h1",{className:"text-center",children:" ADMINISTRATION PANEL"}),Object(w.jsx)(p.a,{className:"mt-5",children:Object(w.jsxs)(D.a,{activeKey:L,onSelect:function(e){le(A,[e])},children:[Object(w.jsx)(E.a,{eventKey:"users",title:"USERS",children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(g.a,{className:"add-new-asset-btn",onClick:function(){R(["new-user"]),y(!0)},children:" new user"}),Object(w.jsxs)(V.a,{striped:!0,hover:!0,responsive:!0,className:"mt-2",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Name"}),Object(w.jsx)("th",{children:"Company"}),Object(w.jsx)("th",{children:"Login ID"}),Object(w.jsx)("th",{children:"ID"})]})}),Object(w.jsx)("tbody",{children:z.length>0&&z.map((function(e,t){return Object(w.jsxs)("tr",{onClick:function(e){var t=e.target.closest("tr").querySelector(".id").innerHTML;R(["users",t]),u(y)},children:[Object(w.jsx)("td",{children:e.name}),Object(w.jsx)("td",{children:e.company.name}),Object(w.jsx)("td",{children:e.loginID}),Object(w.jsx)("td",{className:"id",children:e._id})]},t)}))})]})]})}),Object(w.jsx)(E.a,{eventKey:"companies",title:"COMPANIES",children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(g.a,{className:"add-new-asset-btn",onClick:function(){R(["new-company"]),y(!0)},children:"Add new company"}),Object(w.jsxs)(V.a,{striped:!0,hover:!0,responsive:!0,className:"mt-2",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Company"}),Object(w.jsx)("th",{children:"ID"})]})}),Object(w.jsx)("tbody",{children:ee.length>0&&ee.map((function(e,t){return Object(w.jsxs)("tr",{onClick:function(e){var t=e.target.closest("tr").querySelector(".id").innerHTML;R(["companies",t]),u(!0)},children:[Object(w.jsx)("td",{children:e.name}),Object(w.jsx)("td",{className:"id",children:e._id})]},t)}))})]})]})}),Object(w.jsx)(E.a,{eventKey:"units",title:"UNITS",children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(g.a,{className:"add-new-asset-btn",onClick:function(){R(["new-unit"]),y(!0)},children:"Add new unit"}),Object(w.jsxs)(V.a,{striped:!0,hover:!0,responsive:!0,className:"mt-2",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Unit"}),Object(w.jsx)("th",{children:"Company"}),Object(w.jsx)("th",{children:"ID"})]})}),Object(w.jsx)("tbody",{children:ce.length>0&&ce.map((function(e,t){return Object(w.jsxs)("tr",{onClick:function(e){var t=e.target.closest("tr").querySelector(".id").innerHTML;R(["units",t]),u(!0)},children:[Object(w.jsx)("td",{children:e.name}),Object(w.jsx)("td",{children:e.company.name}),Object(w.jsx)("td",{className:"id",children:e._id})]},t)}))})]})]})})]})})]})]}):null,Object(w.jsx)(W,{states:{askEditModal:i,setEditionModal:h,actionTarget:q,askPassword:le,clearStates:oe,refreshData:re}}),Object(w.jsx)(Q,{states:{editionModal:O,actionTarget:q,askPassword:le,clearStates:oe,refreshData:re}}),Object(w.jsx)(J,{states:{newDataModal:v,actionTarget:q,askPassword:le,clearStates:oe,refreshData:re}}),Object(w.jsx)(X,{states:{pwModal:a,action:U,clearStates:oe}})]})};var Z=function(){return Object(w.jsx)("h1",{children:"404: Not Found"})},$=(a(146),function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],c=t[1];function s(e){var t=e.children,s=Object(u.f)();return Object(n.useEffect)((function(){Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("/me");case 3:c(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c(!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()})),a?t:Object(w.jsx)(u.a,{to:"/login",state:{from:s}})}return Object(w.jsx)(d.a,{basename:"/tractian-fullstack-challenge",children:Object(w.jsxs)(u.d,{children:[Object(w.jsx)(u.b,{path:"/login",element:Object(w.jsx)(y,{})}),Object(w.jsx)(u.b,{path:"/admin",element:Object(w.jsx)(Y,{})}),Object(w.jsx)(u.b,{path:"/",element:Object(w.jsx)(s,{children:Object(w.jsx)(G,{})})}),Object(w.jsx)(u.b,{path:"*",element:Object(w.jsx)(Z,{})})]})})});r.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)($,{})}),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.4c1370a0.chunk.js.map